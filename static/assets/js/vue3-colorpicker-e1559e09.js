import{d as e,r as t,k as a,w as o,q as n,g as r,p as l,v as s,f as i,i as c,_ as u,$ as d,a0 as h,F as g,a1 as v,a2 as p,a3 as C,a4 as b,c as f,D as y,I as m,a5 as S,U as k,a6 as _,a7 as w,a8 as H,y as R,a9 as B,aa as A}from"./@vue-11129043.js";import{C as P}from"./vue-types-0fd36d85.js";import{t as V}from"./tinycolor2-e232e212.js";import{t as x,w as K,u as O,o as E,a as I}from"./@vueuse-94329f85.js";import{V as L}from"./@aesoper-316802a3.js";import{A as M}from"./vue3-angle-2884cf46.js";import{p as W,s as $}from"./gradient-parser-c9367eab.js";import{m as D}from"./lodash-es-0ceb8576.js";import{c as N}from"./@popperjs-31624eb1.js";var j=Object.defineProperty,z=Object.defineProperties,G=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,Z=(e,t,a)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,U=(e,t)=>{for(var a in t||(t={}))T.call(t,a)&&Z(e,a,t[a]);if(q)for(var a of q(t))X.call(t,a)&&Z(e,a,t[a]);return e},F=(e,t)=>z(e,G(t)),Y=(e,t,a)=>(Z(e,"symbol"!=typeof t?t+"":t,a),a);const J=e=>Math.round(100*e)/100;class Q{constructor(e){Y(this,"instance"),Y(this,"alphaValue",0),Y(this,"redValue",0),Y(this,"greenValue",0),Y(this,"blueValue",0),Y(this,"hueValue",0),Y(this,"saturationValue",0),Y(this,"brightnessValue",0),Y(this,"hslSaturationValue",0),Y(this,"lightnessValue",0),Y(this,"initAlpha",(()=>{const e=this.instance.getAlpha();this.alphaValue=100*Math.min(1,e)})),Y(this,"initLightness",(()=>{const{s:e,l:t}=this.instance.toHsl();this.hslSaturationValue=J(e),this.lightnessValue=J(t)})),Y(this,"initRgb",(()=>{const{r:e,g:t,b:a}=this.instance.toRgb();this.redValue=J(e),this.greenValue=J(t),this.blueValue=J(a)})),Y(this,"initHsb",(()=>{const{h:e,s:t,v:a}=this.instance.toHsv();this.hueValue=Math.min(360,Math.ceil(e)),this.saturationValue=J(t),this.brightnessValue=J(a)})),Y(this,"toHexString",(()=>this.instance.toHexString())),Y(this,"toRgbString",(()=>this.instance.toRgbString())),this.instance=V(e),this.initRgb(),this.initHsb(),this.initLightness(),this.initAlpha()}toString(e){return this.instance.toString(e)}get hex(){return this.instance.toHex()}set hex(e){this.instance=V(e),this.initHsb(),this.initRgb(),this.initAlpha(),this.initLightness()}set hue(e){0===this.saturation&&0===this.brightness&&(this.saturationValue=1,this.brightnessValue=1),this.instance=V({h:J(e),s:this.saturation,v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.hueValue=J(e)}get hue(){return this.hueValue}set saturation(e){this.instance=V({h:this.hue,s:J(e),v:this.brightness,a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.saturationValue=J(e)}get saturation(){return this.saturationValue}set brightness(e){this.instance=V({h:this.hue,s:this.saturation,v:J(e),a:this.alphaValue/100}),this.initRgb(),this.initLightness(),this.brightnessValue=J(e)}get brightness(){return this.brightnessValue}set lightness(e){this.instance=V({h:this.hue,s:this.hslSaturationValue,l:J(e),a:this.alphaValue/100}),this.initRgb(),this.initHsb(),this.lightnessValue=J(e)}get lightness(){return this.lightnessValue}set red(e){const t=this.instance.toRgb();this.instance=V(F(U({},t),{r:J(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.redValue=J(e)}get red(){return this.redValue}set green(e){const t=this.instance.toRgb();this.instance=V(F(U({},t),{g:J(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.greenValue=J(e)}get green(){return this.greenValue}set blue(e){const t=this.instance.toRgb();this.instance=V(F(U({},t),{b:J(e),a:this.alphaValue/100})),this.initHsb(),this.initLightness(),this.blueValue=J(e)}get blue(){return this.blueValue}set alpha(e){this.instance.setAlpha(e/100),this.alphaValue=e}get alpha(){return this.alphaValue}get RGB(){return[this.red,this.green,this.blue,this.alpha/100]}get HSB(){return[this.hue,this.saturation,this.brightness,this.alpha/100]}get HSL(){return[this.hue,this.hslSaturationValue,this.lightness,this.alpha/100]}}function ee(e,t,a,o){return`rgba(${[e,t,a,o/100].join(",")})`}const te=(e,t,a)=>t<a?e<t?t:e>a?a:e:e<a?a:e>t?t:e;var ae=(e,t)=>{for(const[a,o]of t)e[a]=o;return e};const oe=e({name:"Alpha",props:{color:P.instanceOf(Q),size:P.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:r}){const l=t(null),s=t(null);let i=e.color||new Q;const c=a({red:i.red,green:i.green,blue:i.blue,alpha:i.alpha});o((()=>e.color),(e=>{e&&(i=e,D(c,{red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}))}),{deep:!0});const u=n((()=>({background:`linear-gradient(to right, ${ee(c.red,c.green,c.blue,0)} , ${ee(c.red,c.green,c.blue,100)})`}))),d=n((()=>({left:(()=>{if(l.value&&s.value){const e=c.alpha/100,t=l.value.getBoundingClientRect(),a=s.value.offsetWidth;return Math.round(e*(t.width-a)+a/2)}return 0})()+"px",top:0}))),h=e=>{if(e.stopPropagation(),l.value&&s.value){const t=l.value.getBoundingClientRect(),a=s.value.offsetWidth;let o=e.clientX-t.left;o=Math.max(a/2,o),o=Math.min(o,t.width-a/2);const n=Math.round((o-a/2)/(t.width-a)*100);i.alpha=n,c.alpha=n,r("change",n)}};return x((()=>{const e={drag:e=>{h(e)},end:e=>{h(e)}};l.value&&s.value&&L.triggerDragEvent(l.value,e)})),{barElement:l,cursorElement:s,getCursorStyle:d,getBackgroundStyle:u,onClickSider:e=>{e.target!==l.value&&h(e)}}}}),ne=[(e=>(B("data-v-18925ba6"),e=e(),A(),e))((()=>u("div",{class:"vc-alpha-slider__bar-handle"},null,-1)))];var re=ae(oe,[["render",function(e,t,a,o,n,r){return i(),c("div",{class:d(["vc-alpha-slider","transparent",{"small-slider":"small"===e.size}])},[u("div",{ref:"barElement",class:"vc-alpha-slider__bar",style:h(e.getBackgroundStyle),onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[u("div",{class:d(["vc-alpha-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:h(e.getCursorStyle)},ne,6)],4)],2)}],["__scopeId","data-v-18925ba6"]]);const le=[["#fcc02e","#f67c01","#e64a19","#d81b43","#8e24aa","#512da7","#1f87e8","#008781","#05a045"],["#fed835","#fb8c00","#f5511e","#eb1d4e","#9c28b1","#5d35b0","#2097f3","#029688","#4cb050"],["#ffeb3c","#ffa727","#fe5722","#eb4165","#aa47bc","#673bb7","#42a5f6","#26a59a","#83c683"],["#fff176","#ffb74e","#ff8a66","#f1627e","#b968c7","#7986cc","#64b5f6","#80cbc4","#a5d6a7"],["#fff59c","#ffcc80","#ffab91","#fb879e","#cf93d9","#9ea8db","#90caf8","#b2dfdc","#c8e6ca"],["transparent","#ffffff","#dedede","#a9a9a9","#4b4b4b","#353535","#212121","#000000","advance"]],se=e({name:"Palette",emits:["change"],setup:(e,{emit:t})=>({palettes:le,computedBgStyle:e=>"transparent"===e?e:"advance"===e?{}:{background:V(e).toRgbString()},onColorChange:e=>{t("change",e)}})}),ie={class:"vc-compact"},ce=["onClick"];var ue=ae(se,[["render",function(e,t,a,o,n,r){return i(),c("div",ie,[(i(!0),c(g,null,v(e.palettes,((t,a)=>(i(),c("div",{key:a,class:"vc-compact__row"},[(i(!0),c(g,null,v(t,((t,a)=>(i(),c("div",{key:a,class:"vc-compact__color-cube--wrap",onClick:a=>e.onColorChange(t)},[u("div",{class:d(["vc-compact__color_cube",{advance:"advance"===t,transparent:"transparent"===t}]),style:h(e.computedBgStyle(t))},null,6)],8,ce)))),128))])))),128))])}],["__scopeId","data-v-b969fd48"]]);const de=e({name:"Board",props:{color:P.instanceOf(Q),round:P.bool.def(!1),hide:P.bool.def(!0)},emits:["change"],setup(e,{emit:o}){var l,s,i;const c=r(),u={h:(null==(l=e.color)?void 0:l.hue)||0,s:1,v:1},d=new Q(u).toHexString(),h=a({hueColor:d,saturation:(null==(s=e.color)?void 0:s.saturation)||0,brightness:(null==(i=e.color)?void 0:i.brightness)||0}),g=t(0),v=t(0),p=t(),C=t(),b=n((()=>({top:g.value+"px",left:v.value+"px"}))),f=()=>{if(c){const e=c.vnode.el;v.value=h.saturation*(null==e?void 0:e.clientWidth),g.value=(1-h.brightness)*(null==e?void 0:e.clientHeight)}},y=e=>{if(c){const t=c.vnode.el,a=null==t?void 0:t.getBoundingClientRect();let n=e.clientX-a.left,r=e.clientY-a.top;n=te(n,0,a.width),r=te(r,0,a.height);const l=n/a.width,s=te(-r/a.height+1,0,1);v.value=n,g.value=r,h.saturation=l,h.brightness=s,o("change",l,s)}};return x((()=>{c&&c.vnode.el&&p.value&&(L.triggerDragEvent(p.value,{drag:e=>{y(e)},end:e=>{y(e)}}),f())})),K((()=>e.color),(e=>{D(h,{hueColor:new Q({h:e.hue,s:1,v:1}).toHexString(),saturation:e.saturation,brightness:e.brightness}),f()}),{deep:!0}),{state:h,cursorElement:p,getCursorStyle:b,onClickBoard:e=>{e.target!==C.value&&y(e)}}}}),he=e=>(B("data-v-63803390"),e=e(),A(),e),ge=he((()=>u("div",{class:"vc-saturation__white"},null,-1))),ve=he((()=>u("div",{class:"vc-saturation__black"},null,-1))),pe=[he((()=>u("div",null,null,-1)))];var Ce=ae(de,[["render",function(e,t,a,o,n,r){return i(),c("div",{ref:"boardElement",class:d(["vc-saturation",{"vc-saturation__chrome":e.round,"vc-saturation__hidden":e.hide}]),style:h({backgroundColor:e.state.hueColor}),onClick:t[0]||(t[0]=(...t)=>e.onClickBoard&&e.onClickBoard(...t))},[ge,ve,u("div",{class:"vc-saturation__cursor",ref:"cursorElement",style:h(e.getCursorStyle)},pe,4)],6)}],["__scopeId","data-v-63803390"]]);const be=e({name:"Hue",props:{color:P.instanceOf(Q),size:P.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:r}){const l=t(null),s=t(null);let i=e.color||new Q;const c=a({hue:i.hue||0});o((()=>e.color),(e=>{e&&(i=e,D(c,{hue:i.hue}))}),{deep:!0});const u=n((()=>({left:(()=>{if(l.value&&s.value){const e=l.value.getBoundingClientRect(),t=s.value.offsetWidth;return 360===c.hue?e.width-t/2:c.hue%360*(e.width-t)/360+t/2}return 0})()+"px",top:0}))),d=e=>{if(e.stopPropagation(),l.value&&s.value){const t=l.value.getBoundingClientRect(),a=s.value.offsetWidth;let o=e.clientX-t.left;o=Math.min(o,t.width-a/2),o=Math.max(a/2,o);const n=Math.round((o-a/2)/(t.width-a)*360);i.hue=n,c.hue=n,r("change",n)}};return x((()=>{const e={drag:e=>{d(e)},end:e=>{d(e)}};l.value&&s.value&&L.triggerDragEvent(l.value,e)})),{barElement:l,cursorElement:s,getCursorStyle:u,onClickSider:e=>{e.target!==l.value&&d(e)}}}}),fe=[(e=>(B("data-v-5c4cae5b"),e=e(),A(),e))((()=>u("div",{class:"vc-hue-slider__bar-handle"},null,-1)))];var ye=ae(be,[["render",function(e,t,a,o,n,r){return i(),c("div",{class:d(["vc-hue-slider",{"small-slider":"small"===e.size}])},[u("div",{ref:"barElement",class:"vc-hue-slider__bar",onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[u("div",{class:d(["vc-hue-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:h(e.getCursorStyle)},fe,6)],512)],2)}],["__scopeId","data-v-5c4cae5b"]]);const me=e({name:"Lightness",props:{color:P.instanceOf(Q),size:P.oneOf(["small","default"]).def("default")},emits:["change"],setup(e,{emit:r}){const l=t(null),s=t(null);let i=e.color||new Q;const[c,u,d]=i.HSL,h=a({hue:c,saturation:u,lightness:d});o((()=>e.color),(e=>{if(e){i=e;const[t,a,o]=i.HSL;D(h,{hue:t,saturation:a,lightness:o})}}),{deep:!0});const g=n((()=>{const e=V({h:h.hue,s:h.saturation,l:.8}).toPercentageRgbString(),t=V({h:h.hue,s:h.saturation,l:.6}).toPercentageRgbString(),a=V({h:h.hue,s:h.saturation,l:.4}).toPercentageRgbString(),o=V({h:h.hue,s:h.saturation,l:.2}).toPercentageRgbString();return{background:[`-webkit-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${a}, ${o}, rgb(0, 0, 0))`,`-moz-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${a}, ${o}, rgb(0, 0, 0))`,`-ms-linear-gradient(left, rgb(255, 255, 255), ${e}, ${t}, ${a}, ${o}, rgb(0, 0, 0))`]}})),v=n((()=>({left:(()=>{if(l.value&&s.value){const e=h.lightness,t=l.value.getBoundingClientRect(),a=s.value.offsetWidth;return(1-e)*(t.width-a)+a/2}return 0})()+"px",top:0}))),p=e=>{if(e.stopPropagation(),l.value&&s.value){const t=l.value.getBoundingClientRect(),a=s.value.offsetWidth;let o=e.clientX-t.left;o=Math.max(a/2,o),o=Math.min(o,t.width-a/2);const n=1-(o-a/2)/(t.width-a);i.lightness=n,r("change",n)}};return x((()=>{const e={drag:e=>{p(e)},end:e=>{p(e)}};l.value&&s.value&&L.triggerDragEvent(l.value,e)})),{barElement:l,cursorElement:s,getCursorStyle:v,getBackgroundStyle:g,onClickSider:e=>{e.target!==l.value&&p(e)}}}}),Se=[(e=>(B("data-v-6156acb7"),e=e(),A(),e))((()=>u("div",{class:"vc-lightness-slider__bar-handle"},null,-1)))];var ke=ae(me,[["render",function(e,t,a,o,n,r){return i(),c("div",{class:d(["vc-lightness-slider",{"small-slider":"small"===e.size}])},[u("div",{ref:"barElement",class:"vc-lightness-slider__bar",style:h(e.getBackgroundStyle),onClick:t[0]||(t[0]=(...t)=>e.onClickSider&&e.onClickSider(...t))},[u("div",{class:d(["vc-lightness-slider__bar-pointer",{"small-bar":"small"===e.size}]),ref:"cursorElement",style:h(e.getCursorStyle)},Se,6)],4)],2)}],["__scopeId","data-v-6156acb7"]]);const _e=e({name:"History",props:{colors:P.arrayOf(String).def((()=>[])),round:P.bool.def(!1)},emits:["change"],setup:(e,{emit:t})=>({onColorSelect:e=>{t("change",e)}})}),we={key:0,class:"vc-colorPicker__record"},He={class:"color-list"},Re=["onClick"];var Be=ae(_e,[["render",function(e,t,a,o,n,r){return e.colors&&e.colors.length>0?(i(),c("div",we,[u("div",He,[(i(!0),c(g,null,v(e.colors,((t,a)=>(i(),c("div",{key:a,class:d(["color-item","transparent",{"color-item__round":e.round}]),onClick:a=>e.onColorSelect(t)},[u("div",{class:"color-item__display",style:h({backgroundColor:t})},null,4)],10,Re)))),128))])])):p("",!0)}],["__scopeId","data-v-7e6b67ca"]]);const Ae=e({name:"Display",props:{color:P.instanceOf(Q),disableAlpha:P.bool.def(!1)},emits:["update:color","change"],setup(e,{emit:t}){var o,r,l;const s=a({color:e.color,previewBgColor:null==(o=e.color)?void 0:o.toRgbString(),alpha:(null==(r=e.color)?void 0:r.alpha)||100,hex:null==(l=e.color)?void 0:l.hex}),i=n((()=>({background:s.previewBgColor})));return K((()=>e.color),(e=>{e&&(s.color=e)}),{deep:!0}),K((()=>s.color),(()=>{s.color&&(s.previewBgColor=s.color.toRgbString(),s.alpha=s.color.alpha,s.hex=s.color.hex,t("update:color",s.color),t("change",s.color))}),{deep:!0}),{state:s,getBgColorStyle:i,onAlphaBlur:e=>{const t=e.target,a=parseInt(t.value.replace("%",""));!isNaN(a)&&s.color&&(s.alpha=a,s.color.alpha=a)},onInputChange:e=>{const t=e.target.value.replace("#","");V(t).isValid()&&s.color&&(s.color.hex=t)}}}}),Pe={class:"vc-display"},Ve={class:"vc-current-color vc-transparent"},xe={class:"vc-color-input"},Ke=["value"],Oe={key:0,class:"vc-alpha-input"},Ee=["value"];var Ie=ae(Ae,[["render",function(e,t,a,o,n,r){return i(),c("div",Pe,[u("div",Ve,[u("div",{class:"color-cube",style:h(e.getBgColorStyle)},null,4)]),u("div",xe,[u("input",{value:e.state.hex,onBlur:t[0]||(t[0]=(...t)=>e.onInputChange&&e.onInputChange(...t))},null,40,Ke)]),e.disableAlpha?p("",!0):(i(),c("div",Oe,[u("input",{class:"vc-alpha-input__inner",value:e.state.alpha+"%",onBlur:t[1]||(t[1]=(...t)=>e.onAlphaBlur&&e.onAlphaBlur(...t))},null,40,Ee)]))])}],["__scopeId","data-v-0067da1d"]]);const Le=e({name:"FkColorPicker",components:{Display:Ie,Alpha:re,Palette:ue,Board:Ce,Hue:ye,Lightness:ke,History:Be},props:{color:P.instanceOf(Q),disableHistory:P.bool.def(!1),roundHistory:P.bool.def(!1),disableAlpha:P.bool.def(!1)},emits:["update:color","change","advanceChange"],setup(e,{emit:o}){const r=e.color||new Q,l=a({color:r,hex:r.toHexString(),rgb:r.toRgbString()}),s=t(!1),i=n((()=>({background:l.rgb}))),c=O("color-history",[],{}),u=I((()=>{if(e.disableHistory)return;const t=l.color.toRgbString();if(c.value=c.value.filter((e=>!V.equals(e,t))),!c.value.includes(t)){for(;c.value.length>8;)c.value.pop();c.value.unshift(t)}}),500);return K((()=>e.color),(e=>{e&&(l.color=e)}),{deep:!0}),K((()=>l.color),(()=>{l.hex=l.color.hex,l.rgb=l.color.toRgbString(),u(),o("update:color",l.color),o("change",l.color)}),{deep:!0}),{state:l,advancePanelShow:s,onBack:()=>{s.value=!1,o("advanceChange",!1)},onCompactChange:e=>{"advance"===e?(s.value=!0,o("advanceChange",!0)):(l.color.hex=e,o("advanceChange",!1))},onAlphaChange:e=>{l.color.alpha=e},onHueChange:e=>{l.color.hue=e},onBoardChange:(e,t)=>{l.color.saturation=e,l.color.brightness=t},onLightChange:e=>{l.color.lightness=e},onInputChange:e=>{const t=e.target.value.replace("#","");V(t).isValid()&&(l.color.hex=t)},previewStyle:i,historyColors:c}}}),Me={class:"vc-fk-colorPicker"},We={class:"vc-fk-colorPicker__inner"},$e={class:"vc-fk-colorPicker__header"},De=[(e=>(B("data-v-592a5ec3"),e=e(),A(),e))((()=>u("div",{class:"back"},null,-1)))];var Ne=ae(Le,[["render",function(e,t,a,o,n,r){const l=C("Palette"),s=C("Board"),d=C("Hue"),h=C("Lightness"),g=C("Alpha"),v=C("Display"),y=C("History");return i(),c("div",Me,[u("div",We,[u("div",$e,[e.advancePanelShow?(i(),c("span",{key:0,style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...t)=>e.onBack&&e.onBack(...t))},De)):p("",!0)]),e.advancePanelShow?p("",!0):(i(),b(l,{key:0,onChange:e.onCompactChange},null,8,["onChange"])),e.advancePanelShow?(i(),b(s,{key:1,color:e.state.color,onChange:e.onBoardChange},null,8,["color","onChange"])):p("",!0),e.advancePanelShow?(i(),b(d,{key:2,color:e.state.color,onChange:e.onHueChange},null,8,["color","onChange"])):p("",!0),e.advancePanelShow?p("",!0):(i(),b(h,{key:3,color:e.state.color,onChange:e.onLightChange},null,8,["color","onChange"])),e.disableAlpha?p("",!0):(i(),b(g,{key:4,color:e.state.color,onChange:e.onAlphaChange},null,8,["color","onChange"])),f(v,{color:e.state.color,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?p("",!0):(i(),b(y,{key:5,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])])}],["__scopeId","data-v-592a5ec3"]]);const je=e({name:"ChromeColorPicker",components:{Display:Ie,Alpha:re,Board:Ce,Hue:ye,History:Be},props:{color:P.instanceOf(Q),disableHistory:P.bool.def(!1),roundHistory:P.bool.def(!1),disableAlpha:P.bool.def(!1)},emits:["update:color","change"],setup(e,{emit:t}){const o=e.color||new Q,r=a({color:o,hex:o.toHexString(),rgb:o.toRgbString()}),l=n((()=>({background:r.rgb}))),s=O("color-history",[],{}),i=I((()=>{if(e.disableHistory)return;const t=r.color.toRgbString();if(s.value=s.value.filter((e=>!V.equals(e,t))),!s.value.includes(t)){for(;s.value.length>8;)s.value.pop();s.value.unshift(t)}}),500);return K((()=>e.color),(e=>{e&&(r.color=e)}),{deep:!0}),K((()=>r.color),(()=>{r.hex=r.color.hex,r.rgb=r.color.toRgbString(),i(),t("update:color",r.color),t("change",r.color)}),{deep:!0}),{state:r,previewStyle:l,historyColors:s,onAlphaChange:e=>{r.color.alpha=e},onHueChange:e=>{r.color.hue=e},onBoardChange:(e,t)=>{r.color.saturation=e,r.color.brightness=t},onCompactChange:e=>{"advance"!==e&&(r.color.hex=e)}}}}),ze={class:"vc-chrome-colorPicker"},Ge={class:"vc-chrome-colorPicker-body"},qe={class:"chrome-controls"},Te={class:"chrome-color-wrap transparent"},Xe={class:"chrome-sliders"};var Ze=ae(je,[["render",function(e,t,a,o,n,r){const l=C("Board"),s=C("Hue"),d=C("Alpha"),g=C("Display"),v=C("History");return i(),c("div",ze,[f(l,{round:!0,hide:!1,color:e.state.color,onChange:e.onBoardChange},null,8,["color","onChange"]),u("div",Ge,[u("div",qe,[u("div",Te,[u("div",{class:"current-color",style:h(e.previewStyle)},null,4)]),u("div",Xe,[f(s,{size:"small",color:e.state.color,onChange:e.onHueChange},null,8,["color","onChange"]),e.disableAlpha?p("",!0):(i(),b(d,{key:0,size:"small",color:e.state.color,onChange:e.onAlphaChange},null,8,["color","onChange"]))])]),f(g,{color:e.state.color,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?p("",!0):(i(),b(v,{key:0,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])])}],["__scopeId","data-v-61d7303b"]]);const Ue=e({name:"GradientColorPicker",components:{Angle:M,Display:Ie,Alpha:re,Palette:ue,Board:Ce,Hue:ye,Lightness:ke,History:Be},props:{startColor:P.instanceOf(Q).isRequired,endColor:P.instanceOf(Q).isRequired,startColorStop:P.number.def(0),endColorStop:P.number.def(100),angle:P.number.def(0),disableHistory:P.bool.def(!1),roundHistory:P.bool.def(!1),disableAlpha:P.bool.def(!1)},emits:["update:startColor","update:endColor","update:angle","update:startColorStop","update:endColorStop","startColorChange","endColorChange","advanceChange","angleChange","startColorStopChange","endColorStopChange"],setup(e,{emit:o}){const r=a({startActive:!0,startColor:e.startColor,endColor:e.endColor,startColorStop:e.startColorStop,endColorStop:e.endColorStop,angle:e.angle,startColorRgba:e.startColor.toRgbString(),endColorRgba:e.endColor.toRgbString()}),s=l("Vue3ColorPickerProvider"),i=t(!1),c=t(),u=t(),d=t(),h=n({get:()=>r.startActive?r.startColor:r.endColor,set:e=>{r.startActive?r.startColor=e:r.endColor=e}}),g=n((()=>{if(d.value&&c.value){const e=r.startColorStop/100,t=d.value.getBoundingClientRect(),a=c.value.offsetWidth;return Math.round(e*(t.width-a)+a/2)}return 0})),v=n((()=>{if(d.value&&u.value){const e=r.endColorStop/100,t=d.value.getBoundingClientRect(),a=u.value.offsetWidth;return Math.round(e*(t.width-a)+a/2)}return 0})),p=n((()=>({background:`linear-gradient(${r.angle}deg, ${r.startColorRgba} ${r.startColorStop}%, ${r.endColorRgba} ${r.endColorStop}%)`}))),C=e=>{var t;if(r.startActive=!0,d.value&&c.value){const a=null==(t=d.value)?void 0:t.getBoundingClientRect();let n=e.clientX-a.left;n=Math.max(c.value.offsetWidth/2,n),n=Math.min(n,a.width-c.value.offsetWidth/2),r.startColorStop=Math.round((n-c.value.offsetWidth/2)/(a.width-c.value.offsetWidth)*100),o("update:startColorStop",r.startColorStop),o("startColorStopChange",r.startColorStop)}},b=e=>{var t;if(r.startActive=!1,d.value&&u.value){const a=null==(t=d.value)?void 0:t.getBoundingClientRect();let n=e.clientX-a.left;n=Math.max(u.value.offsetWidth/2,n),n=Math.min(n,a.width-u.value.offsetWidth/2),r.endColorStop=Math.round((n-u.value.offsetWidth/2)/(a.width-u.value.offsetWidth)*100),o("update:endColorStop",r.endColorStop),o("endColorStopChange",r.endColorStop)}},f=()=>{r.startActive?(o("update:startColor",r.startColor),o("startColorChange",r.startColor)):(o("update:endColor",r.endColor),o("endColorChange",r.endColor))},y=O("color-history",[],{}),m=I((()=>{if(e.disableHistory)return;const t=h.value.toRgbString();if(y.value=y.value.filter((e=>!V.equals(e,t))),!y.value.includes(t)){for(;y.value.length>8;)y.value.pop();y.value.unshift(t)}}),500);return x((()=>{u.value&&c.value&&(L.triggerDragEvent(u.value,{drag:e=>{b(e)},end:e=>{b(e)}}),L.triggerDragEvent(c.value,{drag:e=>{C(e)},end:e=>{C(e)}}))})),K((()=>r.startColor),(e=>{r.startColorRgba=e.toRgbString()}),{deep:!0}),K((()=>r.endColor),(e=>{r.endColorRgba=e.toRgbString()}),{deep:!0}),K((()=>h.value),(()=>{m()}),{deep:!0}),{startGradientRef:c,stopGradientRef:u,colorRangeRef:d,state:r,currentColor:h,getStartColorLeft:g,getEndColorLeft:v,gradientBg:p,advancePanelShow:i,onDegreeBlur:e=>{const t=e.target,a=parseInt(t.value.replace("°",""));isNaN(a)||(r.angle=a%360),o("update:angle",r.angle),o("angleChange",r.angle)},onCompactChange:e=>{"advance"===e?(i.value=!0,o("advanceChange",!0)):(h.value.hex=e,o("advanceChange",!1)),f()},onAlphaChange:e=>{h.value.alpha=e,f()},onHueChange:e=>{h.value.hue=e,f()},onBoardChange:(e,t)=>{h.value.saturation=e,h.value.brightness=t,f()},onLightChange:e=>{h.value.lightness=e,f()},historyColors:y,onBack:()=>{i.value=!1,o("advanceChange",!1)},onDegreeChange:e=>{r.angle=e,o("update:angle",r.angle),o("angleChange",r.angle)},lang:null==s?void 0:s.lang}}}),Fe=e=>(B("data-v-f63daa7a"),e=e(),A(),e),Ye={class:"vc-gradient-picker"},Je={class:"vc-gradient-picker__header"},Qe=[Fe((()=>u("div",{class:"back"},null,-1)))],et={class:"vc-gradient-picker__body"},tt={class:"vc-color-range",ref:"colorRangeRef"},at={class:"vc-color-range__container"},ot={class:"vc-gradient__stop__container"},nt=["title"],rt=[Fe((()=>u("span",{class:"vc-gradient__stop--inner"},null,-1)))],lt=["title"],st=[Fe((()=>u("span",{class:"vc-gradient__stop--inner"},null,-1)))],it={class:"vc-picker-degree-input vc-degree-input"},ct={class:"vc-degree-input__control"},ut=["value"],dt={class:"vc-degree-input__panel"},ht={class:"vc-degree-input__disk"};var gt=ae(Ue,[["render",function(e,t,a,o,n,r){const l=C("Angle"),s=C("Palette"),g=C("Board"),v=C("Hue"),S=C("Lightness"),k=C("Alpha"),_=C("Display"),w=C("History");return i(),c("div",Ye,[y(u("div",Je,[u("span",{style:{cursor:"pointer"},onClick:t[0]||(t[0]=(...t)=>e.onBack&&e.onBack(...t))},Qe)],512),[[m,e.advancePanelShow]]),u("div",et,[u("div",tt,[u("div",at,[u("div",{class:"vc-background",style:h(e.gradientBg)},null,4),u("div",ot,[u("div",{class:d(["vc-gradient__stop",{"vc-gradient__stop--current":e.state.startActive}]),ref:"startGradientRef",title:"ZH-cn"===e.lang?"开始":"Start",style:h({left:e.getStartColorLeft+"px"})},rt,14,nt),u("div",{class:d(["vc-gradient__stop",{"vc-gradient__stop--current":!e.state.startActive}]),ref:"stopGradientRef",title:"ZH-cn"===e.lang?"结束":"End",style:h({left:e.getEndColorLeft+"px"})},st,14,lt)])])],512),u("div",it,[u("div",ct,[u("input",{value:e.state.angle,onBlur:t[1]||(t[1]=(...t)=>e.onDegreeBlur&&e.onDegreeBlur(...t))},null,40,ut)]),u("div",dt,[u("div",ht,[f(l,{angle:e.state.angle,"onUpdate:angle":t[2]||(t[2]=t=>e.state.angle=t),size:40,onChange:e.onDegreeChange},null,8,["angle","onChange"])])])])]),e.advancePanelShow?p("",!0):(i(),b(s,{key:0,onChange:e.onCompactChange},null,8,["onChange"])),e.advancePanelShow?(i(),b(g,{key:1,color:e.currentColor,onChange:e.onBoardChange},null,8,["color","onChange"])):p("",!0),e.advancePanelShow?(i(),b(v,{key:2,color:e.currentColor,onChange:e.onHueChange},null,8,["color","onChange"])):p("",!0),e.advancePanelShow?p("",!0):(i(),b(S,{key:3,color:e.currentColor,onChange:e.onLightChange},null,8,["color","onChange"])),e.disableAlpha?p("",!0):(i(),b(k,{key:4,color:e.currentColor,onChange:e.onAlphaChange},null,8,["color","onChange"])),f(_,{color:e.currentColor,"disable-alpha":e.disableAlpha},null,8,["color","disable-alpha"]),e.disableHistory?p("",!0):(i(),b(w,{key:5,round:e.roundHistory,colors:e.historyColors,onChange:e.onCompactChange},null,8,["round","colors","onChange"]))])}],["__scopeId","data-v-f63daa7a"]]);const vt=e({name:"WrapContainer",props:{showTab:P.bool.def(!1),activeKey:P.oneOf(["pure","gradient"]).def("pure")},emits:["update:activeKey","change"],setup(e,{emit:t}){const o=a({activeKey:e.activeKey}),n=l("Vue3ColorPickerProvider");return K((()=>e.activeKey),(e=>{o.activeKey=e})),{state:o,onActiveKeyChange:e=>{o.activeKey=e,t("update:activeKey",e),t("change",e)},lang:null==n?void 0:n.lang}}}),pt={class:"vc-colorpicker"},Ct={class:"vc-colorpicker--container"},bt={key:0,class:"vc-colorpicker--tabs"},ft={class:"vc-colorpicker--tabs__inner"},yt={class:"vc-btn__content"},mt={class:"vc-btn__content"};var St=ae(vt,[["render",function(e,t,a,o,n,r){return i(),c("div",pt,[u("div",Ct,[e.showTab?(i(),c("div",bt,[u("div",ft,[u("div",{class:d(["vc-colorpicker--tabs__btn",{"vc-btn-active":"pure"===e.state.activeKey}]),onClick:t[0]||(t[0]=t=>e.onActiveKeyChange("pure"))},[u("button",null,[u("div",yt,S("ZH-cn"===e.lang?"纯色":"Pure"),1)])],2),u("div",{class:d(["vc-colorpicker--tabs__btn",{"vc-btn-active":"gradient"===e.state.activeKey}]),onClick:t[1]||(t[1]=t=>e.onActiveKeyChange("gradient"))},[u("button",null,[u("div",mt,S("ZH-cn"===e.lang?"渐变色":"Gradient"),1)])],2),u("div",{class:"vc-colorpicker--tabs__bg",style:h({width:"50%",left:`calc(${"gradient"===e.state.activeKey?50:0}%)`})},null,4)])])):p("",!0),k(e.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-4afdf3bb"]]);const kt={isWidget:P.bool.def(!1),pickerType:P.oneOf(["fk","chrome"]).def("fk"),shape:P.oneOf(["circle","square"]).def("square"),pureColor:{type:[String,Object],default:"#000000"},gradientColor:P.string.def("#000"),format:{type:String,default:"rgb"},disableAlpha:P.bool.def(!1),disableHistory:P.bool.def(!1),roundHistory:P.bool.def(!1),useType:P.oneOf(["pure","gradient","both"]).def("pure"),activeKey:P.oneOf(["pure","gradient"]).def("pure"),lang:{type:String,default:"ZH-cn"},zIndex:P.number.def(9999)};var _t=ae(e({name:"ColorPicker",components:{FkColorPicker:Ne,ChromeColorPicker:Ze,GradientColorPicker:gt,WrapContainer:St},inheritAttrs:!1,props:kt,emits:["update:pureColor","pureColorChange","update:gradientColor","gradientColorChange","update:activeKey","activeKeyChange"],setup(e,{emit:o}){const r=a({pureColor:e.pureColor||"",activeKey:"gradient"===e.useType?"gradient":"pure",isAdvanceMode:!1});s("Vue3ColorPickerProvider",{lang:n((()=>e.lang||"ZH-cn"))});const l=new Q(r.pureColor),i=t(l),c=new Q("#000"),u=new Q("#000"),d=a({startColor:c,endColor:u,startColorStop:0,endColorStop:100,angle:0,gradientColor:e.gradientColor}),h=t(!1),g=t(null),v=t(null),p=n((()=>({background:"gradient"!==r.activeKey?V(r.pureColor).toRgbString():d.gradientColor}))),C=n((()=>"gradient"===r.activeKey?gt.name:"fk"===e.pickerType?Ne.name:Ze.name)),b=n((()=>"gradient"===r.activeKey?{startColor:d.startColor,endColor:d.endColor,onStartColorChange:e=>{d.startColor=e,m()},onEndColorChange:e=>{d.endColor=e,m()},angle:d.angle,startColorStop:d.startColorStop,endColorStop:d.endColorStop,onStartColorStopChange:e=>{d.startColorStop=e,m()},onEndColorStopChange:e=>{d.endColorStop=e,m()},onAngleChange:e=>{d.angle=e,m()},onAdvanceChange:e=>{r.isAdvanceMode=e}}:{disableAlpha:e.disableAlpha,disableHistory:e.disableHistory,roundHistory:e.roundHistory,color:i.value,onChange:k,onAdvanceChange:f})),f=e=>{r.isAdvanceMode=e},y=()=>{var e,t,a,o;try{const[n]=W(d.gradientColor);if(n&&"linear-gradient"===n.type&&"angular"===(null==(e=n.orientation)?void 0:e.type)&&n.colorStops.length>=2){const e=n.colorStops[0],r=n.colorStops[1];d.startColorStop=Number(null==(t=e.length)?void 0:t.value)||0,d.endColorStop=Number(null==(a=r.length)?void 0:a.value)||0,d.angle=Number(null==(o=n.orientation)?void 0:o.value)||0;const[l,s,i,c]=e.value,[u,h,g,v]=e.value;d.startColor=new Q({r:Number(l),g:Number(s),b:Number(i),a:Number(c)}),d.startColor=new Q({r:Number(u),g:Number(h),b:Number(g),a:Number(v)})}}catch(n){}},m=()=>{const e=S();try{d.gradientColor=$(e),o("update:gradientColor",d.gradientColor),o("gradientColorChange",d.gradientColor)}catch(t){}},S=()=>{const e=[],t=d.startColor.RGB.map((e=>e.toString())),a=d.endColor.RGB.map((e=>e.toString()));return e.push({type:"linear-gradient",orientation:{type:"angular",value:d.angle+""},colorStops:[{type:"rgba",value:[t[0],t[1],t[2],t[3]],length:{value:d.startColorStop+"",type:"%"}},{type:"rgba",value:[a[0],a[1],a[2],a[3]],length:{value:d.endColorStop+"",type:"%"}}]}),e},k=t=>{i.value=t,r.pureColor=t.toString(e.format),_()},_=()=>{o("update:pureColor",r.pureColor),o("pureColorChange",r.pureColor)};E(v,(()=>{h.value=!1}));return x((()=>{g.value&&v.value&&N(g.value,v.value,{placement:"auto",modifiers:[{name:"flip",options:{fallbackPlacements:["top","left"]}}]}),_(),y(),m()})),K((()=>e.gradientColor),(e=>{e!=d.gradientColor&&(d.gradientColor=e)})),K((()=>d.gradientColor),(()=>{y()})),K((()=>e.activeKey),(e=>{r.activeKey=e})),K((()=>e.useType),(e=>{"gradient"!==r.activeKey&&"gradient"===e?r.activeKey="gradient":r.activeKey="pure"})),K((()=>e.pureColor),(e=>{V.equals(e,r.pureColor)||(r.pureColor=e,i.value=new Q(e),_())}),{deep:!0}),{colorCubeRef:g,pickerRef:v,showPicker:h,colorInstance:i,getBgColorStyle:p,onColorChange:k,onShowPicker:()=>{h.value=!0},onActiveKeyChange:e=>{r.activeKey=e,o("update:activeKey",e),o("activeKeyChange",e)},getComponentName:C,getBindArgs:b,state:r}}}),[["render",function(e,t,a,o,n,r){const l=C("WrapContainer");return i(),c(g,null,[e.isWidget?p("",!0):(i(),c("div",{key:0,class:d(["vc-color-wrap","transparent",{round:"circle"===e.shape}]),ref:"colorCubeRef"},[u("div",{class:"current-color",style:h(e.getBgColorStyle),onClick:t[0]||(t[0]=(...t)=>e.onShowPicker&&e.onShowPicker(...t))},null,4)],2)),e.isWidget?(i(),b(l,{key:1,"active-key":e.state.activeKey,"onUpdate:active-key":t[1]||(t[1]=t=>e.state.activeKey=t),"show-tab":"both"===e.useType,onChange:e.onActiveKeyChange,style:h({zIndex:e.zIndex})},{default:_((()=>[(i(),b(w(e.getComponentName),H({key:e.getComponentName},e.getBindArgs),null,16))])),_:1},8,["active-key","show-tab","onChange","style"])):p("",!0),e.isWidget?p("",!0):(i(),b(R,{key:2,to:"body"},[y(u("div",{ref:"pickerRef",style:h({zIndex:e.zIndex})},[e.showPicker?(i(),b(l,{key:0,"show-tab":"both"===e.useType&&!e.state.isAdvanceMode,"active-key":e.state.activeKey,"onUpdate:active-key":t[2]||(t[2]=t=>e.state.activeKey=t),onChange:e.onActiveKeyChange},{default:_((()=>[(i(),b(w(e.getComponentName),H({key:e.getComponentName},e.getBindArgs),null,16))])),_:1},8,["show-tab","active-key","onChange"])):p("",!0)],4),[[m,e.showPicker]])]))],64)}],["__scopeId","data-v-0aa3a75d"]]);const wt={install:e=>{e.component(_t.name,_t),e.component("Vue3"+_t.name,_t)}};export{wt as V};
